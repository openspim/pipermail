<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenSPIM] Multiview registration - no inliers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:openspim%40openspim.org?Subject=Re%3A%20%5BOpenSPIM%5D%20Multiview%20registration%20-%20no%20inliers&In-Reply-To=%3CCAC9TZAM0HVA1pqf2P5%2BmJSFp4aQr%3DHLPQUmQEUbf7y40yREA6w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001952.html">
   <LINK REL="Next"  HREF="001954.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenSPIM] Multiview registration - no inliers</H1>
    <B>Tania Mendonca</B> 
    <A HREF="mailto:openspim%40openspim.org?Subject=Re%3A%20%5BOpenSPIM%5D%20Multiview%20registration%20-%20no%20inliers&In-Reply-To=%3CCAC9TZAM0HVA1pqf2P5%2BmJSFp4aQr%3DHLPQUmQEUbf7y40yREA6w%40mail.gmail.com%3E"
       TITLE="[OpenSPIM] Multiview registration - no inliers">tvmendonca1 at sheffield.ac.uk
       </A><BR>
    <I>Wed Aug 24 12:49:15 CDT 2016</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="001952.html">[OpenSPIM] Multiview registration - no inliers
</A></li>
        <LI>Next message (by thread): <A HREF="001954.html">[OpenSPIM] Multiview registration - no inliers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1953">[ date ]</a>
              <a href="thread.html#1953">[ thread ]</a>
              <a href="subject.html#1953">[ subject ]</a>
              <a href="author.html#1953">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Neil

Thanks for your email! The stacks should have the voxel size correctly set
to 0.235 x 0.235 x 0.750. I'm assuming you've looked at the data on
µManager as I'm unfamiliar with the ViewSetup tag that you mention. My
system is not quite an OpenSPIM - I use LabView to control and don't have
the Picard 4D stage (I use a Piezo for scanning instead).

Your manual transform looks about right, the stacks are about 120º apart
with the big bead somewhere near the middle. I have tried a few different
µbeads and the ones in these stacks are 1µm green beads but as you say they
are nowhere near as bright as the big beads. Perhaps I do need to dump the
large beads and find something else to try and reconstruct. I've been
finding about 400-ish interest points in my stacks- is there a magic number
that works for you? I've been imaging to about 100µm depth, how much would
you recommend? Don't the stacks start getting too large to handle?

Thanks for the tip on the camera noise! I think I'll try again tomorrow
with brighter beads, no big beads and larger volumes - I'll let you know
how it goes!

Best wishes
Tania

On 24 August 2016 at 17:55, Anthony, Neil &lt;<A HREF="http://openspim.org/mailman/listinfo/openspim">nantho2 at emory.edu</A>&gt; wrote:

&gt;<i> Hi Tania,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Can I please ask what the z voxel size is?  I see in the test.xml that you
</I>&gt;<i> have a voxel size of 0.235 in xy and z for id 0,1,2 in the ViewSetup tag.
</I>&gt;<i> When I create a xml from scratch here, setting xy to 0.235 and z to 1.5
</I>&gt;<i> (the smallest on the standard Picard 4D stage) I see each id in the xml has
</I>&gt;<i> a size of “0.235 0.235 1.5”.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Stephan, I assume these are the voxel sizes used for the BDV.  Would I be
</I>&gt;<i> correct in assuming some more and saying that if only one value is seen
</I>&gt;<i> it’s used for xy and z?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> …  interlude …  etc. etc.  lalalalala …  coffee etc.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I now see what the problem is.  Well, what some of the problems might be.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I did a manual transform around the y axis and manually overlapped the big
</I>&gt;<i> bead.  See attached.  Is this how is should look?  If I have it laid out
</I>&gt;<i> correctly I think you have a combination of not enough beads, combined with
</I>&gt;<i> not enough overlap of physical volumes given the low number of beads.  On
</I>&gt;<i> top of that I feel the small bead signal is so low that it’s approaching
</I>&gt;<i> the camera noise*.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It is difficult as the big beads are so bright, and you might want to find
</I>&gt;<i> a better sample to test with.  I’ve done some testing on spheroids that are
</I>&gt;<i> really bright, and I had to swap my 100nm tetra spec beads for some really
</I>&gt;<i> bright 1um green beads to be able to get good signal on the beads and not
</I>&gt;<i> saturate the sample of interest.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I started with just little beads to figure out the basics, and I take just
</I>&gt;<i> sub-res bead data to get my PSF output from the decon too.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Neil
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> * inspect the data stacks with orthogonal view and you’ll see the vertical
</I>&gt;<i> lines running down the stack.  For this kind of noise you can run a few
</I>&gt;<i> line scans across your beads and noise to get an idea of the intensity
</I>&gt;<i> difference and then use remove outliers
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* OpenSPIM [mailto:<A HREF="http://openspim.org/mailman/listinfo/openspim">openspim-bounces at openspim.org</A>] *On Behalf Of *Tania
</I>&gt;<i> Mendonca
</I>&gt;<i> *Sent:* Friday, August 19, 2016 3:31 PM
</I>&gt;<i> *To:* <A HREF="http://openspim.org/mailman/listinfo/openspim">Stephan.Preibisch at mdc-berlin.de</A>
</I>&gt;<i> *Cc:* <A HREF="http://openspim.org/mailman/listinfo/openspim">openspim at openspim.org</A>
</I>&gt;<i> *Subject:* Re: [OpenSPIM] Multiview registration - no inliers
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Just tried it but it still doesn't work.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks
</I>&gt;<i>
</I>&gt;<i> Tania
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 19 August 2016 at 20:13, <A HREF="http://openspim.org/mailman/listinfo/openspim">Stephan.Preibisch at mdc-berlin.de</A> &lt;
</I>&gt;<i> <A HREF="http://openspim.org/mailman/listinfo/openspim">Stephan.Preibisch at mdc-berlin.de</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> Hi, I just think that in the beginning when you define your dataset the
</I>&gt;<i> pixel sizes were wrong which potentially corrupts the downstream workflow.
</I>&gt;<i> Try to start from the very beginning, and define a new dataset and manually
</I>&gt;<i> put in the correct calibration. This might just work ...
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> All the best,
</I>&gt;<i>
</I>&gt;<i> Stephan
</I>&gt;<i>
</I>&gt;<i> Sent from my iPhone
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Aug 19, 2016, at 21:00, Tania Mendonca &lt;<A HREF="http://openspim.org/mailman/listinfo/openspim">tvmendonca1 at sheffield.ac.uk</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I've just checked to make sure but yes I have corrected the voxel size on
</I>&gt;<i> the image stacks and there shouldn't be a mistake in that. However, your
</I>&gt;<i> reply gave me an idea and I did a quick test. I duplicated one of the
</I>&gt;<i> images and ran the multiview reconstruction plugin for the two duplicates.
</I>&gt;<i> It worked, so it makes me think that there's nothing wrong with the files
</I>&gt;<i> themselves and you might be right about the issue being with my voxel
</I>&gt;<i> depth. I've referred to SVI's Nyquist calculator to workout my step size,
</I>&gt;<i> is there a recommended step size that people use?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Best wishes
</I>&gt;<i>
</I>&gt;<i> Tania
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 19 August 2016 at 16:58, <A HREF="http://openspim.org/mailman/listinfo/openspim">Stephan.Preibisch at mdc-berlin.de</A> &lt;
</I>&gt;<i> <A HREF="http://openspim.org/mailman/listinfo/openspim">Stephan.Preibisch at mdc-berlin.de</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> Hi, my first guess would be that your calibration (pixel size is x,y and
</I>&gt;<i> z) is wrong ... Can you make sure this is correct when you define your
</I>&gt;<i> dataset?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> All the best,
</I>&gt;<i>
</I>&gt;<i> Stephan
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Aug 19, 2016, at 17:17, Tania Mendonca &lt;<A HREF="http://openspim.org/mailman/listinfo/openspim">tvmendonca1 at sheffield.ac.uk</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> Hi all
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hope your microscopes are aligned and treating you well! I'm sorry if I've
</I>&gt;<i> missed this conversation before but I was wondering if any of you have had
</I>&gt;<i> similar problems as me with trying to get the Fiji multiview reconstruction
</I>&gt;<i> plugin to like my data.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I've tried a range of microspheres - different colours, different sizes
</I>&gt;<i> and different concentrations but it never seems to find enough
</I>&gt;<i> correspondences between views. I've been primarily experimenting with
</I>&gt;<i> interactively detec​​ting interest points. I've tried the presets as well
</I>&gt;<i> but with no luck. I've tried to systematically work through various
</I>&gt;<i> combinations of sigma and threshold but always end up with 0 inliers.
</I>&gt;<i> Registrations always terminates with the following error: &quot;There are no
</I>&gt;<i> connected tiles, cannot do an optimization. Quitting.&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My home built system doesn't run on µManager and my images are acquired as
</I>&gt;<i> .cxd files which I convert to .tifs before processing. I'm attaching some
</I>&gt;<i> of my test data - <A HREF="https://drive.google.com/file/d/0B-he-_wcys_-">https://drive.google.com/file/d/0B-he-_wcys_-</A>
</I>&gt;<i> aUtRZ0pidFhyUlk/view?usp=sharing
</I>&gt;<i>
</I>&gt;<i> the sample here is 1µm yellow-green beads (1:4000 dilution) and 10µm
</I>&gt;<i> beads (1:50 dilution) with the idea of using the 1µm beads to reconstruct
</I>&gt;<i> the 10µm beads. I use the same objectives as on the OpenSPIM system (10X
</I>&gt;<i> for illumination and 20X for detection), magnification on the system is
</I>&gt;<i> 27.7X. The illumination here is 473nm and detection at 520nm.​​
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> A log file has been included in the zip file to give you an idea of what
</I>&gt;<i> I've been trying.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I hope I'm just missing a trick somewhere. Any help would be greatly
</I>&gt;<i> appreciated!
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Best wishes
</I>&gt;<i>
</I>&gt;<i> Tania
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> -------------------------
</I>&gt;<i>
</I>&gt;<i> Tania Mendonca
</I>&gt;<i>
</I>&gt;<i> Doctoral Research Student
</I>&gt;<i>
</I>&gt;<i> University of Sheffield
</I>&gt;<i>
</I>&gt;<i> S10 2TN
</I>&gt;<i>
</I>&gt;<i> -------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenSPIM mailing list
</I>&gt;<i> <A HREF="http://openspim.org/mailman/listinfo/openspim">OpenSPIM at openspim.org</A>
</I>&gt;<i> <A HREF="http://openspim.org/mailman/listinfo/openspim">http://openspim.org/mailman/listinfo/openspim</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> -------------------------
</I>&gt;<i>
</I>&gt;<i> Tania Mendonca
</I>&gt;<i>
</I>&gt;<i> Doctoral Research Student
</I>&gt;<i>
</I>&gt;<i> University of Sheffield
</I>&gt;<i>
</I>&gt;<i> S10 2TN
</I>&gt;<i>
</I>&gt;<i> -------------------------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> -------------------------
</I>&gt;<i>
</I>&gt;<i> Tania Mendonca
</I>&gt;<i>
</I>&gt;<i> Doctoral Research Student
</I>&gt;<i>
</I>&gt;<i> University of Sheffield
</I>&gt;<i>
</I>&gt;<i> S10 2TN
</I>&gt;<i>
</I>&gt;<i> -------------------------
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> This e-mail message (including any attachments) is for the sole use of
</I>&gt;<i> the intended recipient(s) and may contain confidential and privileged
</I>&gt;<i> information. If the reader of this message is not the intended
</I>&gt;<i> recipient, you are hereby notified that any dissemination, distribution
</I>&gt;<i> or copying of this message (including any attachments) is strictly
</I>&gt;<i> prohibited.
</I>&gt;<i>
</I>&gt;<i> If you have received this message in error, please contact
</I>&gt;<i> the sender by reply e-mail message and destroy all copies of the
</I>&gt;<i> original message (including attachments).
</I>&gt;<i>
</I>


-- 
-------------------------
Tania Mendonca
Doctoral Research Student
University of Sheffield
S10 2TN
-------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://openspim.org/pipermail/openspim/attachments/20160824/99221a95/attachment.html">http://openspim.org/pipermail/openspim/attachments/20160824/99221a95/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="001952.html">[OpenSPIM] Multiview registration - no inliers
</A></li>
	<LI>Next message (by thread): <A HREF="001954.html">[OpenSPIM] Multiview registration - no inliers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1953">[ date ]</a>
              <a href="thread.html#1953">[ thread ]</a>
              <a href="subject.html#1953">[ subject ]</a>
              <a href="author.html#1953">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://openspim.org/mailman/listinfo/openspim">More information about the OpenSPIM
mailing list</a><br>
</body></html>
