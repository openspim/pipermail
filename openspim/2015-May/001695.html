<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenSPIM] very slow acquisition speed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:openspim%40openspim.org?Subject=Re%3A%20%5BOpenSPIM%5D%20very%20slow%20acquisition%20speed&In-Reply-To=%3C555346C9.8030006%40ist.ac.at%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001693.html">
   <LINK REL="Next"  HREF="001673.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenSPIM] very slow acquisition speed</H1>
    <B>Robert Hauschild</B> 
    <A HREF="mailto:openspim%40openspim.org?Subject=Re%3A%20%5BOpenSPIM%5D%20very%20slow%20acquisition%20speed&In-Reply-To=%3C555346C9.8030006%40ist.ac.at%3E"
       TITLE="[OpenSPIM] very slow acquisition speed">robert.hauschild at ist.ac.at
       </A><BR>
    <I>Wed May 13 07:42:49 CDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001693.html">[OpenSPIM] very slow acquisition speed
</A></li>
        <LI>Next message: <A HREF="001673.html">[OpenSPIM] OpenSPIM update site
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1695">[ date ]</a>
              <a href="thread.html#1695">[ thread ]</a>
              <a href="subject.html#1695">[ subject ]</a>
              <a href="author.html#1695">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

Monika:
&gt;<i> &quot;What is going on&quot; should be relatively easy if you look at the 
</I>&gt;<i> timestamps in the log that you send. &quot;Why&quot; and &quot;How to fix it&quot; is a 
</I>&gt;<i> different matter unfortunately.
</I>I put together a time line that visualizes the log file I sent with the 
first email (single slice no stage movement).
 From this I learn that it somehow takes 300 ms to acquire 1 image with 
an exposure time of 100 ms. After that it takes an additional 250 ms 
until the laser is told to turn off. That is ~400 ms unaccounted for.
As I mentioned  I still don't understand why the stage is even engaged 
and the laser power  is queried during acquisition.

&gt;<i> Did you try to take a time series only with Micromanager, without the 
</I>&gt;<i> OpenSPIM plugin? This should be possible somehow.
</I>As mentioned I can record a time series at full camera frame rate with 
Micromanager alone. No problem whatsoever.

Johannes :
&gt;<i> The profiler (which one are you using? 
</I>I am using &quot;Profile acquisition&quot; in the SPIM plugin.
I will try to get the results from the Flight Recorder of Java Mission 
Control.

Best regards,

Robert

&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Monika
</I>&gt;<i>
</I>&gt;<i> W dniu .05.2015 o 19:00 &lt;<A HREF="http://openspim.org/mailman/listinfo/openspim">openspim-request at openspim.org</A>&gt; pisze:
</I>&gt;<i>
</I>&gt;&gt;<i> Send OpenSPIM mailing list submissions to
</I>&gt;&gt;<i>     <A HREF="http://openspim.org/mailman/listinfo/openspim">openspim at openspim.org</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;&gt;<i>     <A HREF="http://openspim.org/mailman/listinfo/openspim">http://openspim.org/mailman/listinfo/openspim</A>
</I>&gt;&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;&gt;<i>     <A HREF="http://openspim.org/mailman/listinfo/openspim">openspim-request at openspim.org</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You can reach the person managing the list at
</I>&gt;&gt;<i>     <A HREF="http://openspim.org/mailman/listinfo/openspim">openspim-owner at openspim.org</A>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;&gt;<i> than &quot;Re: Contents of OpenSPIM digest...&quot;
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Today's Topics:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    1. Re: very slow acquisition speed (Robert Hauschild)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> ----------------------------------------------------------------------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Message: 1
</I>&gt;&gt;<i> Date: Tue, 12 May 2015 14:41:25 +0200
</I>&gt;&gt;<i> From: Robert Hauschild &lt;<A HREF="http://openspim.org/mailman/listinfo/openspim">robert.hauschild at ist.ac.at</A>&gt;
</I>&gt;&gt;<i> To: <A HREF="http://openspim.org/mailman/listinfo/openspim">openspim at openspim.org</A>
</I>&gt;&gt;<i> Subject: Re: [OpenSPIM] very slow acquisition speed
</I>&gt;&gt;<i> Message-ID: &lt;<A HREF="http://openspim.org/mailman/listinfo/openspim">5551F4F5.3050403 at ist.ac.at</A>&gt;
</I>&gt;&gt;<i> Content-Type: text/plain; charset=utf-8; format=flowed
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Dear Monika, All,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> thanks for testing! At least my system is not the only one that is so 
</I>&gt;&gt;<i> slow.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Would be great if someone could tell me how to figure out what is going
</I>&gt;&gt;<i> on during the 75% of time that is unaccounted for in the profiler!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> thanks!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Robert
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 07.05.2015 18:20, <A HREF="http://openspim.org/mailman/listinfo/openspim">m.pawlowska at nencki.gov.pl</A> wrote:
</I>&gt;&gt;&gt;<i> Dear Robert,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> since I also have Orca+Picard, I decided to repeat your experiment and
</I>&gt;&gt;&gt;<i> did 10 frames, 100 ms. I'm using the new 64-bit version, updated. I
</I>&gt;&gt;&gt;<i> got very similar results to yours (see below). Unfortunately I don't
</I>&gt;&gt;&gt;<i> know whether it used to be better, I never tried taking very fast
</I>&gt;&gt;&gt;<i> measurements.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Maybe somebody who is able to get 10 frames/sec could send their
</I>&gt;&gt;&gt;<i> CoreLog for comparison...?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Opened log file
</I>&gt;&gt;&gt;<i> D:\Dane\2015\2015_05\2015_05_07\02time_series_test\log.txt
</I>&gt;&gt;&gt;<i> Profiler(&quot;performAcquisition&quot;)[4 children]: 6,0611s
</I>&gt;&gt;&gt;<i> 6,3337%:    Profiler(&quot;Output&quot;)[0 children]: 0,3839s
</I>&gt;&gt;&gt;<i> 0,0000%:    Profiler(&quot;Acquisition&quot;)[0 children]: 0,0000s
</I>&gt;&gt;&gt;<i> 29,7792%:    Profiler(&quot;Movement&quot;)[0 children]: 1,8049s
</I>&gt;&gt;&gt;<i> 0,0005%:    Profiler(&quot;Setup&quot;)[0 children]: 0,0000s
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;<i> Monika
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi All and especially Pete,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> My setup is Orca R2, Coherent Cube, Picard stage.
</I>&gt;&gt;&gt;<i> I tested a couple of things and it it still unclear to me where the
</I>&gt;&gt;&gt;<i> time is wasted.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I attached the core log of a 10 frame long time series (100ms
</I>&gt;&gt;&gt;<i> exposure) recorded to memory with X/Y/Z Stage/Theta all unchecked and
</I>&gt;&gt;&gt;<i> without &quot;Update Live preview&quot;.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I tried two configurations:
</I>&gt;&gt;&gt;<i> 1. Orca  + Cube + Picard
</I>&gt;&gt;&gt;<i> 2. Orca  + Picard
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &quot;1&quot; took 7.6 s of which (&quot;1&quot;- &quot;2&quot;) = 1.4 s are communication with
</I>&gt;&gt;&gt;<i> laser, which, while way too much, is not the source of the problem.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Profiler(&quot;performAcquisition&quot;)[4 children]: 7.6113s
</I>&gt;&gt;&gt;<i> 0.0017%:    Profiler(&quot;Output&quot;)[0 children]: 0.0001s
</I>&gt;&gt;&gt;<i> 0.0000%:    Profiler(&quot;Acquisition&quot;)[0 children]: 0.0000s
</I>&gt;&gt;&gt;<i> 24.0133%:    Profiler(&quot;Movement&quot;)[0 children]: 1.8277s
</I>&gt;&gt;&gt;<i> 0.0013%:    Profiler(&quot;Setup&quot;)[0 children]: 0.0001s
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> So most of the time the system is doing something that the Profiler is
</I>&gt;&gt;&gt;<i> not recording.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Looking at the core log I am a bit puzzled why the laser power is
</I>&gt;&gt;&gt;<i> queried once  per slice and why the stage is told to move to the very
</I>&gt;&gt;&gt;<i> position it currently is even though none of the motors should move at
</I>&gt;&gt;&gt;<i> all since X/Y/Z/Theta are all unchecked in the acquisition dialog.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I would really appreciate any hint/suggestion on how to get back to
</I>&gt;&gt;&gt;<i> reasonable acquisition speeds.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks again!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Robert
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

-- 

Robert Hauschild
staff scientist

Institute of Science and Technology Austria (IST Austria)
Am Campus 1
A â€“ 3400 Klosterneuburg
Phone: +43 (0)2243 - 9000 - 1047
Email:   <A HREF="http://openspim.org/mailman/listinfo/openspim">robert.hauschild at ist.ac.at</A>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: speedproblem.jpg
Type: image/jpeg
Size: 62746 bytes
Desc: not available
URL: &lt;<A HREF="http://openspim.org/pipermail/openspim/attachments/20150513/5ff67be3/attachment-0002.jpg">http://openspim.org/pipermail/openspim/attachments/20150513/5ff67be3/attachment-0002.jpg</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001693.html">[OpenSPIM] very slow acquisition speed
</A></li>
	<LI>Next message: <A HREF="001673.html">[OpenSPIM] OpenSPIM update site
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1695">[ date ]</a>
              <a href="thread.html#1695">[ thread ]</a>
              <a href="subject.html#1695">[ subject ]</a>
              <a href="author.html#1695">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://openspim.org/mailman/listinfo/openspim">More information about the OpenSPIM
mailing list</a><br>
</body></html>
